{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"theme\", \"sections\", \"scrollToNextEvent\", \"avoidDateUpdates\", \"onScroll\", \"renderSectionHeader\", \"sectionStyle\", \"dayFormatter\", \"dayFormat\", \"useMoment\", \"markToday\", \"infiniteListProps\", \"renderItem\", \"onEndReached\", \"onEndReachedThreshold\"];\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport PropTypes from 'prop-types';\nimport isUndefined from 'lodash/isUndefined';\nimport debounce from 'lodash/debounce';\nimport InfiniteList from \"../../infinite-list\";\nimport XDate from 'xdate';\nimport React, { useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { useDidUpdate } from \"../../hooks\";\nimport { getMoment } from \"../../momentResolver\";\nimport { isGTE, isToday } from \"../../dateutils\";\nimport { getDefaultLocale } from \"../../services\";\nimport { UpdateSources, todayString } from \"../commons\";\nimport styleConstructor from \"../style\";\nimport Context from \"../Context\";\nimport constants from \"../../commons/constants\";\nimport { parseDate } from \"../../interface\";\nimport { LayoutProvider } from 'recyclerlistview/dist/reactnative/core/dependencies/LayoutProvider';\nimport { AgendaSectionHeader } from \"./commons\";\nimport { jsx as _jsx, Fragment as _Fragment } from \"react/jsx-runtime\";\nvar InfiniteAgendaList = function InfiniteAgendaList(_ref) {\n  var _sections$;\n  var theme = _ref.theme,\n    sections = _ref.sections,\n    scrollToNextEvent = _ref.scrollToNextEvent,\n    avoidDateUpdates = _ref.avoidDateUpdates,\n    onScroll = _ref.onScroll,\n    renderSectionHeader = _ref.renderSectionHeader,\n    sectionStyle = _ref.sectionStyle,\n    dayFormatter = _ref.dayFormatter,\n    _ref$dayFormat = _ref.dayFormat,\n    dayFormat = _ref$dayFormat === void 0 ? 'dddd, MMM d' : _ref$dayFormat,\n    useMoment = _ref.useMoment,\n    _ref$markToday = _ref.markToday,\n    markToday = _ref$markToday === void 0 ? true : _ref$markToday,\n    infiniteListProps = _ref.infiniteListProps,\n    renderItem = _ref.renderItem,\n    onEndReached = _ref.onEndReached,\n    onEndReachedThreshold = _ref.onEndReachedThreshold,\n    others = _objectWithoutProperties(_ref, _excluded);\n  var _useContext = useContext(Context),\n    date = _useContext.date,\n    updateSource = _useContext.updateSource,\n    setDate = _useContext.setDate;\n  var style = useRef(styleConstructor(theme));\n  var list = useRef();\n  var _topSection = useRef((_sections$ = sections[0]) == null ? void 0 : _sections$.title);\n  var didScroll = useRef(false);\n  var sectionScroll = useRef(false);\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    data = _useState2[0],\n    setData = _useState2[1];\n  var dataRef = useRef(data);\n  useEffect(function () {\n    var items = sections.reduce(function (acc, cur) {\n      return [].concat(_toConsumableArray(acc), [{\n        title: cur.title,\n        isTitle: true\n      }], _toConsumableArray(cur.data));\n    }, []);\n    setData(items);\n    dataRef.current = items;\n    if (date !== _topSection.current) {\n      setTimeout(function () {\n        scrollToSection(date);\n      }, 500);\n    }\n  }, [sections]);\n  useDidUpdate(function () {\n    if (updateSource !== UpdateSources.LIST_DRAG && updateSource !== UpdateSources.CALENDAR_INIT) {\n      scrollToSection(date);\n    }\n  }, [date]);\n  var getSectionIndex = function getSectionIndex(date) {\n    var dataIndex = 0;\n    for (var i = 0; i < sections.length; i++) {\n      if (sections[i].title === date) {\n        return dataIndex;\n      }\n      dataIndex += sections[i].data.length + 1;\n    }\n  };\n  var getNextSectionIndex = function getNextSectionIndex(date) {\n    var cur = new XDate(date);\n    var dataIndex = 0;\n    for (var i = 0; i < sections.length; i++) {\n      var titleDate = parseDate(sections[i].title);\n      if (isGTE(titleDate, cur)) {\n        return dataIndex;\n      }\n      dataIndex += sections[i].data.length + 1;\n    }\n  };\n  var getSectionTitle = useCallback(function (title) {\n    if (!title) return;\n    var sectionTitle = title;\n    if (dayFormatter) {\n      sectionTitle = dayFormatter(title);\n    } else if (dayFormat) {\n      if (useMoment) {\n        var moment = getMoment();\n        sectionTitle = moment(title).format(dayFormat);\n      } else {\n        sectionTitle = new XDate(title).toString(dayFormat);\n      }\n    }\n    if (markToday) {\n      var string = getDefaultLocale().today || todayString;\n      var today = isToday(title);\n      sectionTitle = today ? string + \", \" + sectionTitle : sectionTitle;\n    }\n    return sectionTitle;\n  }, []);\n  var scrollToSection = useCallback(debounce(function (requestedDate) {\n    var sectionIndex = scrollToNextEvent ? getNextSectionIndex(requestedDate) : getSectionIndex(requestedDate);\n    if (isUndefined(sectionIndex)) {\n      return;\n    }\n    if (list != null && list.current && sectionIndex !== undefined) {\n      sectionScroll.current = true;\n      if (requestedDate !== _topSection.current) {\n        var _sections$findItemTit, _list$current;\n        _topSection.current = (_sections$findItemTit = sections[findItemTitleIndex(sectionIndex)]) == null ? void 0 : _sections$findItemTit.title;\n        (_list$current = list.current) == null ? void 0 : _list$current.scrollToIndex(sectionIndex, true);\n      }\n      setTimeout(function () {\n        _onMomentumScrollEnd();\n      }, 500);\n    }\n  }, 1000, {\n    leading: true,\n    trailing: true\n  }), [sections]);\n  var layoutProvider = useMemo(function () {\n    return new LayoutProvider(function (index) {\n      var _dataRef$current$inde, _dataRef$current$inde2, _dataRef$current$inde3;\n      return (_dataRef$current$inde = dataRef.current[index]) != null && _dataRef$current$inde.isTitle ? 'title' : (_dataRef$current$inde2 = (_dataRef$current$inde3 = dataRef.current[index]) == null ? void 0 : _dataRef$current$inde3.itemCustomHeightType) != null ? _dataRef$current$inde2 : 'page';\n    }, function (type, dim) {\n      var _infiniteListProps$ti, _infiniteListProps$it, _ref2, _infiniteListProps$it2, _infiniteListProps$it3;\n      dim.width = constants.screenWidth;\n      switch (type) {\n        case 'title':\n          dim.height = (_infiniteListProps$ti = infiniteListProps == null ? void 0 : infiniteListProps.titleHeight) != null ? _infiniteListProps$ti : 60;\n          break;\n        case 'page':\n          dim.height = (_infiniteListProps$it = infiniteListProps == null ? void 0 : infiniteListProps.itemHeight) != null ? _infiniteListProps$it : 80;\n          break;\n        default:\n          dim.height = (_ref2 = (_infiniteListProps$it2 = infiniteListProps == null ? void 0 : (_infiniteListProps$it3 = infiniteListProps.itemHeightByType) == null ? void 0 : _infiniteListProps$it3[type]) != null ? _infiniteListProps$it2 : infiniteListProps == null ? void 0 : infiniteListProps.itemHeight) != null ? _ref2 : 80;\n      }\n    });\n  }, []);\n  var _onScroll = useCallback(function (rawEvent) {\n    if (!didScroll.current) {\n      didScroll.current = true;\n      scrollToSection.cancel();\n    }\n    var event = {\n      nativeEvent: {\n        contentOffset: rawEvent.nativeEvent.contentOffset,\n        layoutMeasurement: rawEvent.nativeEvent.layoutMeasurement,\n        contentSize: rawEvent.nativeEvent.contentSize\n      }\n    };\n    onScroll == null ? void 0 : onScroll(event);\n  }, [onScroll]);\n  var _onVisibleIndicesChanged = useCallback(function (all) {\n    if (all && all.length && !sectionScroll.current) {\n      var topItemIndex = all[0];\n      var topSection = data[findItemTitleIndex(topItemIndex)];\n      if (topSection && topSection !== _topSection.current) {\n        _topSection.current = topSection.title;\n        if (didScroll.current && !avoidDateUpdates) {\n          setDate == null ? void 0 : setDate(topSection.title, UpdateSources.LIST_DRAG);\n        }\n      }\n    }\n  }, [avoidDateUpdates, setDate, data]);\n  var findItemTitleIndex = useCallback(function (itemIndex) {\n    var titleIndex = itemIndex;\n    while (titleIndex > 0 && !((_data$titleIndex = data[titleIndex]) != null && _data$titleIndex.isTitle)) {\n      var _data$titleIndex;\n      titleIndex--;\n    }\n    return titleIndex;\n  }, [data]);\n  var _onMomentumScrollEnd = useCallback(function () {\n    sectionScroll.current = false;\n  }, []);\n  var headerTextStyle = useMemo(function () {\n    return [style.current.sectionText, sectionStyle];\n  }, [sectionStyle]);\n  var _renderSectionHeader = useCallback(function (info) {\n    var _info$section;\n    var title = info == null ? void 0 : (_info$section = info.section) == null ? void 0 : _info$section.title;\n    if (renderSectionHeader) {\n      return renderSectionHeader(title);\n    }\n    var headerTitle = getSectionTitle(title);\n    return _jsx(AgendaSectionHeader, {\n      title: headerTitle,\n      style: headerTextStyle\n    });\n  }, [headerTextStyle]);\n  var _renderItem = useCallback(function (_type, item) {\n    if (item != null && item.isTitle) {\n      return _renderSectionHeader({\n        section: item\n      });\n    }\n    if (renderItem) {\n      return renderItem({\n        item: item\n      });\n    }\n    return _jsx(_Fragment, {});\n  }, [renderItem]);\n  var _onEndReached = useCallback(function () {\n    if (onEndReached) {\n      onEndReached({\n        distanceFromEnd: 0\n      });\n    }\n  }, [onEndReached]);\n  return _jsx(InfiniteList, {\n    ref: list,\n    renderItem: _renderItem,\n    data: data,\n    style: style.current.container,\n    layoutProvider: layoutProvider,\n    onScroll: _onScroll,\n    onVisibleIndicesChanged: _onVisibleIndicesChanged,\n    scrollViewProps: _objectSpread(_objectSpread({\n      nestedScrollEnabled: true\n    }, others), {}, {\n      onMomentumScrollEnd: _onMomentumScrollEnd\n    }),\n    onEndReached: _onEndReached,\n    onEndReachedThreshold: onEndReachedThreshold,\n    disableScrollOnDataChange: true,\n    renderFooter: infiniteListProps == null ? void 0 : infiniteListProps.renderFooter\n  });\n};\nexport default InfiniteAgendaList;\nInfiniteAgendaList.displayName = 'InfiniteAgendaList';\nInfiniteAgendaList.propTypes = {\n  dayFormat: PropTypes.string,\n  dayFormatter: PropTypes.func,\n  useMoment: PropTypes.bool,\n  markToday: PropTypes.bool,\n  sectionStyle: PropTypes.oneOfType([PropTypes.object, PropTypes.number, PropTypes.array]),\n  avoidDateUpdates: PropTypes.bool\n};","map":{"version":3,"names":["PropTypes","isUndefined","debounce","InfiniteList","XDate","React","useCallback","useContext","useEffect","useMemo","useRef","useState","useDidUpdate","getMoment","isGTE","isToday","getDefaultLocale","UpdateSources","todayString","styleConstructor","Context","constants","parseDate","LayoutProvider","AgendaSectionHeader","jsx","_jsx","Fragment","_Fragment","InfiniteAgendaList","_ref","_sections$","theme","sections","scrollToNextEvent","avoidDateUpdates","onScroll","renderSectionHeader","sectionStyle","dayFormatter","_ref$dayFormat","dayFormat","useMoment","_ref$markToday","markToday","infiniteListProps","renderItem","onEndReached","onEndReachedThreshold","others","_objectWithoutProperties","_excluded","_useContext","date","updateSource","setDate","style","list","_topSection","title","didScroll","sectionScroll","_useState","_useState2","_slicedToArray","data","setData","dataRef","items","reduce","acc","cur","concat","_toConsumableArray","isTitle","current","setTimeout","scrollToSection","LIST_DRAG","CALENDAR_INIT","getSectionIndex","dataIndex","i","length","getNextSectionIndex","titleDate","getSectionTitle","sectionTitle","moment","format","toString","string","today","requestedDate","sectionIndex","undefined","_sections$findItemTit","_list$current","findItemTitleIndex","scrollToIndex","_onMomentumScrollEnd","leading","trailing","layoutProvider","index","_dataRef$current$inde","_dataRef$current$inde2","_dataRef$current$inde3","itemCustomHeightType","type","dim","_infiniteListProps$ti","_infiniteListProps$it","_ref2","_infiniteListProps$it2","_infiniteListProps$it3","width","screenWidth","height","titleHeight","itemHeight","itemHeightByType","_onScroll","rawEvent","cancel","event","nativeEvent","contentOffset","layoutMeasurement","contentSize","_onVisibleIndicesChanged","all","topItemIndex","topSection","itemIndex","titleIndex","_data$titleIndex","headerTextStyle","sectionText","_renderSectionHeader","info","_info$section","section","headerTitle","_renderItem","_type","item","_onEndReached","distanceFromEnd","ref","container","onVisibleIndicesChanged","scrollViewProps","_objectSpread","nestedScrollEnabled","onMomentumScrollEnd","disableScrollOnDataChange","renderFooter","displayName","propTypes","func","bool","oneOfType","object","number","array"],"sources":["C:/Users/User/Downloads/mobile/node_modules/react-native-calendars/src/expandableCalendar/AgendaList/infiniteAgendaList.js"],"sourcesContent":["import PropTypes from 'prop-types';\nimport isUndefined from 'lodash/isUndefined';\nimport debounce from 'lodash/debounce';\nimport InfiniteList from '../../infinite-list';\nimport XDate from 'xdate';\nimport React, { useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { useDidUpdate } from '../../hooks';\nimport { getMoment } from '../../momentResolver';\nimport { isGTE, isToday } from '../../dateutils';\nimport { getDefaultLocale } from '../../services';\nimport { UpdateSources, todayString } from '../commons';\nimport styleConstructor from '../style';\nimport Context from '../Context';\nimport constants from '../../commons/constants';\nimport { parseDate } from '../../interface';\nimport { LayoutProvider } from 'recyclerlistview/dist/reactnative/core/dependencies/LayoutProvider';\nimport { AgendaSectionHeader } from './commons';\n/**\n * @description: AgendaList component that use InfiniteList to improve performance\n * @note: Should be wrapped with 'CalendarProvider'\n * @extends: InfiniteList\n * @example: https://github.com/wix/react-native-calendars/blob/master/example/src/screens/expandableCalendar.js\n */\nconst InfiniteAgendaList = ({ theme, sections, scrollToNextEvent, avoidDateUpdates, onScroll, renderSectionHeader, sectionStyle, dayFormatter, dayFormat = 'dddd, MMM d', useMoment, markToday = true, infiniteListProps, renderItem, onEndReached, onEndReachedThreshold, ...others }) => {\n    const { date, updateSource, setDate } = useContext(Context);\n    const style = useRef(styleConstructor(theme));\n    const list = useRef();\n    const _topSection = useRef(sections[0]?.title);\n    const didScroll = useRef(false);\n    const sectionScroll = useRef(false);\n    const [data, setData] = useState([]);\n    const dataRef = useRef(data);\n    useEffect(() => {\n        const items = sections.reduce((acc, cur) => {\n            return [...acc, { title: cur.title, isTitle: true }, ...cur.data];\n        }, []);\n        setData(items);\n        dataRef.current = items;\n        if (date !== _topSection.current) {\n            setTimeout(() => {\n                scrollToSection(date);\n            }, 500);\n        }\n    }, [sections]);\n    useDidUpdate(() => {\n        // NOTE: on first init data should set first section to the current date!!!\n        if (updateSource !== UpdateSources.LIST_DRAG && updateSource !== UpdateSources.CALENDAR_INIT) {\n            scrollToSection(date);\n        }\n    }, [date]);\n    const getSectionIndex = (date) => {\n        let dataIndex = 0;\n        for (let i = 0; i < sections.length; i++) {\n            if (sections[i].title === date) {\n                return dataIndex;\n            }\n            dataIndex += sections[i].data.length + 1;\n        }\n    };\n    const getNextSectionIndex = (date) => {\n        const cur = new XDate(date);\n        let dataIndex = 0;\n        for (let i = 0; i < sections.length; i++) {\n            const titleDate = parseDate(sections[i].title);\n            if (isGTE(titleDate, cur)) {\n                return dataIndex;\n            }\n            dataIndex += sections[i].data.length + 1;\n        }\n    };\n    const getSectionTitle = useCallback((title) => {\n        if (!title)\n            return;\n        let sectionTitle = title;\n        if (dayFormatter) {\n            sectionTitle = dayFormatter(title);\n        }\n        else if (dayFormat) {\n            if (useMoment) {\n                const moment = getMoment();\n                sectionTitle = moment(title).format(dayFormat);\n            }\n            else {\n                sectionTitle = new XDate(title).toString(dayFormat);\n            }\n        }\n        if (markToday) {\n            const string = getDefaultLocale().today || todayString;\n            const today = isToday(title);\n            sectionTitle = today ? `${string}, ${sectionTitle}` : sectionTitle;\n        }\n        return sectionTitle;\n    }, []);\n    const scrollToSection = useCallback(debounce((requestedDate) => {\n        const sectionIndex = scrollToNextEvent ? getNextSectionIndex(requestedDate) : getSectionIndex(requestedDate);\n        if (isUndefined(sectionIndex)) {\n            return;\n        }\n        if (list?.current && sectionIndex !== undefined) {\n            sectionScroll.current = true; // to avoid setDate() in _onVisibleIndicesChanged\n            if (requestedDate !== _topSection.current) {\n                _topSection.current = sections[findItemTitleIndex(sectionIndex)]?.title;\n                list.current?.scrollToIndex(sectionIndex, true);\n            }\n            setTimeout(() => {\n                _onMomentumScrollEnd(); // the RecyclerListView doesn't trigger onMomentumScrollEnd when calling scrollToSection\n            }, 500);\n        }\n    }, 1000, { leading: true, trailing: true }), [sections]);\n    const layoutProvider = useMemo(() => new LayoutProvider((index) => dataRef.current[index]?.isTitle ? 'title' : dataRef.current[index]?.itemCustomHeightType ?? 'page', (type, dim) => {\n        dim.width = constants.screenWidth;\n        switch (type) {\n            case 'title':\n                dim.height = infiniteListProps?.titleHeight ?? 60;\n                break;\n            case 'page':\n                dim.height = infiniteListProps?.itemHeight ?? 80;\n                break;\n            default:\n                dim.height = infiniteListProps?.itemHeightByType?.[type] ?? infiniteListProps?.itemHeight ?? 80;\n        }\n    }), []);\n    const _onScroll = useCallback((rawEvent) => {\n        if (!didScroll.current) {\n            didScroll.current = true;\n            scrollToSection.cancel();\n        }\n        // Convert to a format similar to NativeSyntheticEvent<NativeScrollEvent>\n        const event = {\n            nativeEvent: {\n                contentOffset: rawEvent.nativeEvent.contentOffset,\n                layoutMeasurement: rawEvent.nativeEvent.layoutMeasurement,\n                contentSize: rawEvent.nativeEvent.contentSize\n            }\n        };\n        onScroll?.(event);\n    }, [onScroll]);\n    const _onVisibleIndicesChanged = useCallback((all) => {\n        if (all && all.length && !sectionScroll.current) {\n            const topItemIndex = all[0];\n            const topSection = data[findItemTitleIndex(topItemIndex)];\n            if (topSection && topSection !== _topSection.current) {\n                _topSection.current = topSection.title;\n                if (didScroll.current && !avoidDateUpdates) {\n                    // to avoid setDate() on first load (while setting the initial context.date value)\n                    setDate?.(topSection.title, UpdateSources.LIST_DRAG);\n                }\n            }\n        }\n    }, [avoidDateUpdates, setDate, data]);\n    const findItemTitleIndex = useCallback((itemIndex) => {\n        let titleIndex = itemIndex;\n        while (titleIndex > 0 && !data[titleIndex]?.isTitle) {\n            titleIndex--;\n        }\n        return titleIndex;\n    }, [data]);\n    const _onMomentumScrollEnd = useCallback(() => {\n        sectionScroll.current = false;\n    }, []);\n    const headerTextStyle = useMemo(() => [style.current.sectionText, sectionStyle], [sectionStyle]);\n    const _renderSectionHeader = useCallback((info) => {\n        const title = info?.section?.title;\n        if (renderSectionHeader) {\n            return renderSectionHeader(title);\n        }\n        const headerTitle = getSectionTitle(title);\n        return <AgendaSectionHeader title={headerTitle} style={headerTextStyle}/>;\n    }, [headerTextStyle]);\n    const _renderItem = useCallback((_type, item) => {\n        if (item?.isTitle) {\n            return _renderSectionHeader({ section: item });\n        }\n        if (renderItem) {\n            return renderItem({ item });\n        }\n        return <></>;\n    }, [renderItem]);\n    const _onEndReached = useCallback(() => {\n        if (onEndReached) {\n            onEndReached({ distanceFromEnd: 0 }); // The RecyclerListView doesn't provide the distanceFromEnd, so we just pass 0\n        }\n    }, [onEndReached]);\n    return (<InfiniteList ref={list} renderItem={_renderItem} data={data} style={style.current.container} layoutProvider={layoutProvider} onScroll={_onScroll} onVisibleIndicesChanged={_onVisibleIndicesChanged} scrollViewProps={{ nestedScrollEnabled: true, ...others, onMomentumScrollEnd: _onMomentumScrollEnd }} onEndReached={_onEndReached} onEndReachedThreshold={onEndReachedThreshold} disableScrollOnDataChange renderFooter={infiniteListProps?.renderFooter}/>);\n};\nexport default InfiniteAgendaList;\nInfiniteAgendaList.displayName = 'InfiniteAgendaList';\nInfiniteAgendaList.propTypes = {\n    dayFormat: PropTypes.string,\n    dayFormatter: PropTypes.func,\n    useMoment: PropTypes.bool,\n    markToday: PropTypes.bool,\n    sectionStyle: PropTypes.oneOfType([PropTypes.object, PropTypes.number, PropTypes.array]),\n    avoidDateUpdates: PropTypes.bool\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}