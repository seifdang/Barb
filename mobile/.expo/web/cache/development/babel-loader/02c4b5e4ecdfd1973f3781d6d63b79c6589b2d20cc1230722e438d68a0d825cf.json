{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { includes } from 'lodash';\nimport XDate from 'xdate';\nimport React, { useRef, useState, useCallback, useMemo } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport { sameMonth } from \"../../dateutils\";\nimport { xdateToData } from \"../../interface\";\nimport { useDidUpdate } from \"../../hooks\";\nimport { UpdateSources } from \"../commons\";\nimport styleConstructor from \"../style\";\nimport CalendarContext from \"./index\";\nimport TodayButton from \"./todayButton\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar CalendarProvider = function CalendarProvider(props) {\n  var theme = props.theme,\n    date = props.date,\n    onDateChanged = props.onDateChanged,\n    onMonthChange = props.onMonthChange,\n    disableAutoDaySelection = props.disableAutoDaySelection,\n    _props$showTodayButto = props.showTodayButton,\n    showTodayButton = _props$showTodayButto === void 0 ? false : _props$showTodayButto,\n    disabledOpacity = props.disabledOpacity,\n    todayBottomMargin = props.todayBottomMargin,\n    todayButtonStyle = props.todayButtonStyle,\n    propsStyle = props.style,\n    numberOfDays = props.numberOfDays,\n    _props$timelineLeftIn = props.timelineLeftInset,\n    timelineLeftInset = _props$timelineLeftIn === void 0 ? 72 : _props$timelineLeftIn,\n    children = props.children;\n  var style = useRef(styleConstructor(theme));\n  var todayButton = useRef();\n  var prevDate = useRef(date);\n  var currDate = useRef(date);\n  var _useState = useState(date),\n    _useState2 = _slicedToArray(_useState, 2),\n    currentDate = _useState2[0],\n    setCurrentDate = _useState2[1];\n  var _useState3 = useState(date),\n    _useState4 = _slicedToArray(_useState3, 2),\n    selectedDate = _useState4[0],\n    setSelectedDate = _useState4[1];\n  var _useState5 = useState(UpdateSources.CALENDAR_INIT),\n    _useState6 = _slicedToArray(_useState5, 2),\n    updateSource = _useState6[0],\n    setUpdateSource = _useState6[1];\n  var wrapperStyle = useMemo(function () {\n    return [style.current.contextWrapper, propsStyle];\n  }, [style, propsStyle]);\n  useDidUpdate(function () {\n    if (date && date !== currentDate) {\n      _setDate(date, UpdateSources.PROP_UPDATE);\n    }\n  }, [date]);\n  var getUpdateSource = useCallback(function (updateSource) {\n    if (updateSource === UpdateSources.ARROW_PRESS || updateSource === UpdateSources.WEEK_ARROW_PRESS) {\n      return UpdateSources.PAGE_SCROLL;\n    }\n    return updateSource;\n  }, []);\n  var _setDate = useCallback(function (date, updateSource) {\n    prevDate.current = currDate.current;\n    currDate.current = date;\n    setCurrentDate(date);\n    if (!includes(disableAutoDaySelection, updateSource)) {\n      setSelectedDate(date);\n    }\n    setUpdateSource(updateSource);\n    var _updateSource = getUpdateSource(updateSource);\n    onDateChanged == null ? void 0 : onDateChanged(date, _updateSource);\n    if (!sameMonth(new XDate(date), new XDate(prevDate.current))) {\n      onMonthChange == null ? void 0 : onMonthChange(xdateToData(new XDate(date)), _updateSource);\n    }\n  }, [onDateChanged, onMonthChange, getUpdateSource]);\n  var _setDisabled = useCallback(function (disabled) {\n    if (showTodayButton) {\n      var _todayButton$current;\n      (_todayButton$current = todayButton.current) == null ? void 0 : _todayButton$current.disable(disabled);\n    }\n  }, [showTodayButton]);\n  var contextValue = useMemo(function () {\n    return {\n      date: currentDate,\n      prevDate: prevDate.current,\n      selectedDate: selectedDate,\n      updateSource: updateSource,\n      setDate: _setDate,\n      setDisabled: _setDisabled,\n      numberOfDays: numberOfDays,\n      timelineLeftInset: timelineLeftInset\n    };\n  }, [currentDate, updateSource, numberOfDays, _setDisabled]);\n  var renderTodayButton = function renderTodayButton() {\n    return _jsx(TodayButton, {\n      ref: todayButton,\n      disabledOpacity: disabledOpacity,\n      margin: todayBottomMargin,\n      style: todayButtonStyle,\n      theme: theme\n    });\n  };\n  return _jsxs(CalendarContext.Provider, {\n    value: contextValue,\n    children: [_jsx(View, {\n      style: wrapperStyle,\n      children: children\n    }, numberOfDays), showTodayButton && renderTodayButton()]\n  });\n};\nexport default CalendarProvider;\nCalendarProvider.displayName = 'CalendarProvider';","map":{"version":3,"names":["includes","XDate","React","useRef","useState","useCallback","useMemo","View","sameMonth","xdateToData","useDidUpdate","UpdateSources","styleConstructor","CalendarContext","TodayButton","jsx","_jsx","jsxs","_jsxs","CalendarProvider","props","theme","date","onDateChanged","onMonthChange","disableAutoDaySelection","_props$showTodayButto","showTodayButton","disabledOpacity","todayBottomMargin","todayButtonStyle","propsStyle","style","numberOfDays","_props$timelineLeftIn","timelineLeftInset","children","todayButton","prevDate","currDate","_useState","_useState2","_slicedToArray","currentDate","setCurrentDate","_useState3","_useState4","selectedDate","setSelectedDate","_useState5","CALENDAR_INIT","_useState6","updateSource","setUpdateSource","wrapperStyle","current","contextWrapper","_setDate","PROP_UPDATE","getUpdateSource","ARROW_PRESS","WEEK_ARROW_PRESS","PAGE_SCROLL","_updateSource","_setDisabled","disabled","_todayButton$current","disable","contextValue","setDate","setDisabled","renderTodayButton","ref","margin","Provider","value","displayName"],"sources":["C:/Users/User/Downloads/mobile/node_modules/react-native-calendars/src/expandableCalendar/Context/Provider.js"],"sourcesContent":["import { includes } from 'lodash';\nimport XDate from 'xdate';\nimport React, { useRef, useState, useCallback, useMemo } from 'react';\nimport { View } from 'react-native';\nimport { sameMonth } from '../../dateutils';\nimport { xdateToData } from '../../interface';\nimport { useDidUpdate } from '../../hooks';\nimport { UpdateSources } from '../commons';\nimport styleConstructor from '../style';\nimport CalendarContext from './index';\nimport TodayButton from './todayButton';\n/**\n * @description: Calendar context provider component\n * @example: https://github.com/wix/react-native-calendars/blob/master/example/src/screens/expandableCalendar.js\n */\nconst CalendarProvider = (props) => {\n    const { theme, date, onDateChanged, onMonthChange, disableAutoDaySelection, showTodayButton = false, disabledOpacity, todayBottomMargin, todayButtonStyle, style: propsStyle, numberOfDays, timelineLeftInset = 72, children } = props;\n    const style = useRef(styleConstructor(theme));\n    const todayButton = useRef();\n    const prevDate = useRef(date);\n    const currDate = useRef(date); // for setDate only to keep prevDate up to date\n    const [currentDate, setCurrentDate] = useState(date);\n    const [selectedDate, setSelectedDate] = useState(date);\n    const [updateSource, setUpdateSource] = useState(UpdateSources.CALENDAR_INIT);\n    const wrapperStyle = useMemo(() => {\n        return [style.current.contextWrapper, propsStyle];\n    }, [style, propsStyle]);\n    useDidUpdate(() => {\n        if (date && date !== currentDate) {\n            _setDate(date, UpdateSources.PROP_UPDATE);\n        }\n    }, [date]);\n    const getUpdateSource = useCallback((updateSource) => {\n        // NOTE: this comes to avoid breaking those how listen to the update source in onDateChanged and onMonthChange - remove on V2\n        if (updateSource === UpdateSources.ARROW_PRESS || updateSource === UpdateSources.WEEK_ARROW_PRESS) {\n            return UpdateSources.PAGE_SCROLL;\n        }\n        return updateSource;\n    }, []);\n    const _setDate = useCallback((date, updateSource) => {\n        prevDate.current = currDate.current;\n        currDate.current = date;\n        setCurrentDate(date);\n        if (!includes(disableAutoDaySelection, updateSource)) {\n            setSelectedDate(date);\n        }\n        setUpdateSource(updateSource);\n        const _updateSource = getUpdateSource(updateSource);\n        onDateChanged?.(date, _updateSource);\n        if (!sameMonth(new XDate(date), new XDate(prevDate.current))) {\n            onMonthChange?.(xdateToData(new XDate(date)), _updateSource);\n        }\n    }, [onDateChanged, onMonthChange, getUpdateSource]);\n    const _setDisabled = useCallback((disabled) => {\n        if (showTodayButton) {\n            todayButton.current?.disable(disabled);\n        }\n    }, [showTodayButton]);\n    const contextValue = useMemo(() => {\n        return {\n            date: currentDate,\n            prevDate: prevDate.current,\n            selectedDate,\n            updateSource: updateSource,\n            setDate: _setDate,\n            setDisabled: _setDisabled,\n            numberOfDays,\n            timelineLeftInset\n        };\n    }, [currentDate, updateSource, numberOfDays, _setDisabled]);\n    const renderTodayButton = () => {\n        return (<TodayButton ref={todayButton} disabledOpacity={disabledOpacity} margin={todayBottomMargin} style={todayButtonStyle} theme={theme}/>);\n    };\n    return (<CalendarContext.Provider value={contextValue}>\n      <View style={wrapperStyle} key={numberOfDays}>{children}</View>\n      {showTodayButton && renderTodayButton()}\n    </CalendarContext.Provider>);\n};\nexport default CalendarProvider;\nCalendarProvider.displayName = 'CalendarProvider';\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}