{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";var _excluded=[\"theme\",\"sections\",\"scrollToNextEvent\",\"avoidDateUpdates\",\"onScroll\",\"renderSectionHeader\",\"sectionStyle\",\"dayFormatter\",\"dayFormat\",\"useMoment\",\"markToday\",\"infiniteListProps\",\"renderItem\",\"onEndReached\",\"onEndReachedThreshold\"];function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}import PropTypes from'prop-types';import isUndefined from'lodash/isUndefined';import debounce from'lodash/debounce';import InfiniteList from'../../infinite-list';import XDate from'xdate';import React,{useCallback,useContext,useEffect,useMemo,useRef,useState}from'react';import{useDidUpdate}from'../../hooks';import{getMoment}from'../../momentResolver';import{isGTE,isToday}from'../../dateutils';import{getDefaultLocale}from'../../services';import{UpdateSources,todayString}from'../commons';import styleConstructor from'../style';import Context from'../Context';import constants from'../../commons/constants';import{parseDate}from'../../interface';import{LayoutProvider}from'recyclerlistview/dist/reactnative/core/dependencies/LayoutProvider';import{AgendaSectionHeader}from'./commons';import{jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";var InfiniteAgendaList=function InfiniteAgendaList(_ref){var _sections$;var theme=_ref.theme,sections=_ref.sections,scrollToNextEvent=_ref.scrollToNextEvent,avoidDateUpdates=_ref.avoidDateUpdates,onScroll=_ref.onScroll,renderSectionHeader=_ref.renderSectionHeader,sectionStyle=_ref.sectionStyle,dayFormatter=_ref.dayFormatter,_ref$dayFormat=_ref.dayFormat,dayFormat=_ref$dayFormat===void 0?'dddd, MMM d':_ref$dayFormat,useMoment=_ref.useMoment,_ref$markToday=_ref.markToday,markToday=_ref$markToday===void 0?true:_ref$markToday,infiniteListProps=_ref.infiniteListProps,renderItem=_ref.renderItem,onEndReached=_ref.onEndReached,onEndReachedThreshold=_ref.onEndReachedThreshold,others=_objectWithoutProperties(_ref,_excluded);var _useContext=useContext(Context),date=_useContext.date,updateSource=_useContext.updateSource,setDate=_useContext.setDate;var style=useRef(styleConstructor(theme));var list=useRef();var _topSection=useRef((_sections$=sections[0])==null?void 0:_sections$.title);var didScroll=useRef(false);var sectionScroll=useRef(false);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var dataRef=useRef(data);useEffect(function(){var items=sections.reduce(function(acc,cur){return[].concat(_toConsumableArray(acc),[{title:cur.title,isTitle:true}],_toConsumableArray(cur.data));},[]);setData(items);dataRef.current=items;if(date!==_topSection.current){setTimeout(function(){scrollToSection(date);},500);}},[sections]);useDidUpdate(function(){if(updateSource!==UpdateSources.LIST_DRAG&&updateSource!==UpdateSources.CALENDAR_INIT){scrollToSection(date);}},[date]);var getSectionIndex=function getSectionIndex(date){var dataIndex=0;for(var i=0;i<sections.length;i++){if(sections[i].title===date){return dataIndex;}dataIndex+=sections[i].data.length+1;}};var getNextSectionIndex=function getNextSectionIndex(date){var cur=new XDate(date);var dataIndex=0;for(var i=0;i<sections.length;i++){var titleDate=parseDate(sections[i].title);if(isGTE(titleDate,cur)){return dataIndex;}dataIndex+=sections[i].data.length+1;}};var getSectionTitle=useCallback(function(title){if(!title)return;var sectionTitle=title;if(dayFormatter){sectionTitle=dayFormatter(title);}else if(dayFormat){if(useMoment){var moment=getMoment();sectionTitle=moment(title).format(dayFormat);}else{sectionTitle=new XDate(title).toString(dayFormat);}}if(markToday){var string=getDefaultLocale().today||todayString;var today=isToday(title);sectionTitle=today?`${string}, ${sectionTitle}`:sectionTitle;}return sectionTitle;},[]);var scrollToSection=useCallback(debounce(function(requestedDate){var sectionIndex=scrollToNextEvent?getNextSectionIndex(requestedDate):getSectionIndex(requestedDate);if(isUndefined(sectionIndex)){return;}if(list!=null&&list.current&&sectionIndex!==undefined){sectionScroll.current=true;if(requestedDate!==_topSection.current){var _sections$findItemTit,_list$current;_topSection.current=(_sections$findItemTit=sections[findItemTitleIndex(sectionIndex)])==null?void 0:_sections$findItemTit.title;(_list$current=list.current)==null?void 0:_list$current.scrollToIndex(sectionIndex,true);}setTimeout(function(){_onMomentumScrollEnd();},500);}},1000,{leading:true,trailing:true}),[sections]);var layoutProvider=useMemo(function(){return new LayoutProvider(function(index){var _dataRef$current$inde,_dataRef$current$inde2,_dataRef$current$inde3;return(_dataRef$current$inde=dataRef.current[index])!=null&&_dataRef$current$inde.isTitle?'title':(_dataRef$current$inde2=(_dataRef$current$inde3=dataRef.current[index])==null?void 0:_dataRef$current$inde3.itemCustomHeightType)!=null?_dataRef$current$inde2:'page';},function(type,dim){var _infiniteListProps$ti,_infiniteListProps$it,_ref2,_infiniteListProps$it2,_infiniteListProps$it3;dim.width=constants.screenWidth;switch(type){case'title':dim.height=(_infiniteListProps$ti=infiniteListProps==null?void 0:infiniteListProps.titleHeight)!=null?_infiniteListProps$ti:60;break;case'page':dim.height=(_infiniteListProps$it=infiniteListProps==null?void 0:infiniteListProps.itemHeight)!=null?_infiniteListProps$it:80;break;default:dim.height=(_ref2=(_infiniteListProps$it2=infiniteListProps==null?void 0:(_infiniteListProps$it3=infiniteListProps.itemHeightByType)==null?void 0:_infiniteListProps$it3[type])!=null?_infiniteListProps$it2:infiniteListProps==null?void 0:infiniteListProps.itemHeight)!=null?_ref2:80;}});},[]);var _onScroll=useCallback(function(rawEvent){if(!didScroll.current){didScroll.current=true;scrollToSection.cancel();}var event={nativeEvent:{contentOffset:rawEvent.nativeEvent.contentOffset,layoutMeasurement:rawEvent.nativeEvent.layoutMeasurement,contentSize:rawEvent.nativeEvent.contentSize}};onScroll==null?void 0:onScroll(event);},[onScroll]);var _onVisibleIndicesChanged=useCallback(function(all){if(all&&all.length&&!sectionScroll.current){var topItemIndex=all[0];var topSection=data[findItemTitleIndex(topItemIndex)];if(topSection&&topSection!==_topSection.current){_topSection.current=topSection.title;if(didScroll.current&&!avoidDateUpdates){setDate==null?void 0:setDate(topSection.title,UpdateSources.LIST_DRAG);}}}},[avoidDateUpdates,setDate,data]);var findItemTitleIndex=useCallback(function(itemIndex){var titleIndex=itemIndex;while(titleIndex>0&&!((_data$titleIndex=data[titleIndex])!=null&&_data$titleIndex.isTitle)){var _data$titleIndex;titleIndex--;}return titleIndex;},[data]);var _onMomentumScrollEnd=useCallback(function(){sectionScroll.current=false;},[]);var headerTextStyle=useMemo(function(){return[style.current.sectionText,sectionStyle];},[sectionStyle]);var _renderSectionHeader=useCallback(function(info){var _info$section;var title=info==null?void 0:(_info$section=info.section)==null?void 0:_info$section.title;if(renderSectionHeader){return renderSectionHeader(title);}var headerTitle=getSectionTitle(title);return _jsx(AgendaSectionHeader,{title:headerTitle,style:headerTextStyle});},[headerTextStyle]);var _renderItem=useCallback(function(_type,item){if(item!=null&&item.isTitle){return _renderSectionHeader({section:item});}if(renderItem){return renderItem({item:item});}return _jsx(_Fragment,{});},[renderItem]);var _onEndReached=useCallback(function(){if(onEndReached){onEndReached({distanceFromEnd:0});}},[onEndReached]);return _jsx(InfiniteList,{ref:list,renderItem:_renderItem,data:data,style:style.current.container,layoutProvider:layoutProvider,onScroll:_onScroll,onVisibleIndicesChanged:_onVisibleIndicesChanged,scrollViewProps:_objectSpread(_objectSpread({nestedScrollEnabled:true},others),{},{onMomentumScrollEnd:_onMomentumScrollEnd}),onEndReached:_onEndReached,onEndReachedThreshold:onEndReachedThreshold,disableScrollOnDataChange:true,renderFooter:infiniteListProps==null?void 0:infiniteListProps.renderFooter});};export default InfiniteAgendaList;InfiniteAgendaList.displayName='InfiniteAgendaList';InfiniteAgendaList.propTypes={dayFormat:PropTypes.string,dayFormatter:PropTypes.func,useMoment:PropTypes.bool,markToday:PropTypes.bool,sectionStyle:PropTypes.oneOfType([PropTypes.object,PropTypes.number,PropTypes.array]),avoidDateUpdates:PropTypes.bool};","map":{"version":3,"names":["PropTypes","isUndefined","debounce","InfiniteList","XDate","React","useCallback","useContext","useEffect","useMemo","useRef","useState","useDidUpdate","getMoment","isGTE","isToday","getDefaultLocale","UpdateSources","todayString","styleConstructor","Context","constants","parseDate","LayoutProvider","AgendaSectionHeader","jsx","_jsx","Fragment","_Fragment","InfiniteAgendaList","_ref","_sections$","theme","sections","scrollToNextEvent","avoidDateUpdates","onScroll","renderSectionHeader","sectionStyle","dayFormatter","_ref$dayFormat","dayFormat","useMoment","_ref$markToday","markToday","infiniteListProps","renderItem","onEndReached","onEndReachedThreshold","others","_objectWithoutProperties","_excluded","_useContext","date","updateSource","setDate","style","list","_topSection","title","didScroll","sectionScroll","_useState","_useState2","_slicedToArray","data","setData","dataRef","items","reduce","acc","cur","concat","_toConsumableArray","isTitle","current","setTimeout","scrollToSection","LIST_DRAG","CALENDAR_INIT","getSectionIndex","dataIndex","i","length","getNextSectionIndex","titleDate","getSectionTitle","sectionTitle","moment","format","toString","string","today","requestedDate","sectionIndex","undefined","_sections$findItemTit","_list$current","findItemTitleIndex","scrollToIndex","_onMomentumScrollEnd","leading","trailing","layoutProvider","index","_dataRef$current$inde","_dataRef$current$inde2","_dataRef$current$inde3","itemCustomHeightType","type","dim","_infiniteListProps$ti","_infiniteListProps$it","_ref2","_infiniteListProps$it2","_infiniteListProps$it3","width","screenWidth","height","titleHeight","itemHeight","itemHeightByType","_onScroll","rawEvent","cancel","event","nativeEvent","contentOffset","layoutMeasurement","contentSize","_onVisibleIndicesChanged","all","topItemIndex","topSection","itemIndex","titleIndex","_data$titleIndex","headerTextStyle","sectionText","_renderSectionHeader","info","_info$section","section","headerTitle","_renderItem","_type","item","_onEndReached","distanceFromEnd","ref","container","onVisibleIndicesChanged","scrollViewProps","_objectSpread","nestedScrollEnabled","onMomentumScrollEnd","disableScrollOnDataChange","renderFooter","displayName","propTypes","func","bool","oneOfType","object","number","array"],"sources":["C:/Users/User/Downloads/git_frontend/mobile/node_modules/react-native-calendars/src/expandableCalendar/AgendaList/infiniteAgendaList.js"],"sourcesContent":["import PropTypes from 'prop-types';\nimport isUndefined from 'lodash/isUndefined';\nimport debounce from 'lodash/debounce';\nimport InfiniteList from '../../infinite-list';\nimport XDate from 'xdate';\nimport React, { useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { useDidUpdate } from '../../hooks';\nimport { getMoment } from '../../momentResolver';\nimport { isGTE, isToday } from '../../dateutils';\nimport { getDefaultLocale } from '../../services';\nimport { UpdateSources, todayString } from '../commons';\nimport styleConstructor from '../style';\nimport Context from '../Context';\nimport constants from '../../commons/constants';\nimport { parseDate } from '../../interface';\nimport { LayoutProvider } from 'recyclerlistview/dist/reactnative/core/dependencies/LayoutProvider';\nimport { AgendaSectionHeader } from './commons';\n/**\n * @description: AgendaList component that use InfiniteList to improve performance\n * @note: Should be wrapped with 'CalendarProvider'\n * @extends: InfiniteList\n * @example: https://github.com/wix/react-native-calendars/blob/master/example/src/screens/expandableCalendar.js\n */\nconst InfiniteAgendaList = ({ theme, sections, scrollToNextEvent, avoidDateUpdates, onScroll, renderSectionHeader, sectionStyle, dayFormatter, dayFormat = 'dddd, MMM d', useMoment, markToday = true, infiniteListProps, renderItem, onEndReached, onEndReachedThreshold, ...others }) => {\n    const { date, updateSource, setDate } = useContext(Context);\n    const style = useRef(styleConstructor(theme));\n    const list = useRef();\n    const _topSection = useRef(sections[0]?.title);\n    const didScroll = useRef(false);\n    const sectionScroll = useRef(false);\n    const [data, setData] = useState([]);\n    const dataRef = useRef(data);\n    useEffect(() => {\n        const items = sections.reduce((acc, cur) => {\n            return [...acc, { title: cur.title, isTitle: true }, ...cur.data];\n        }, []);\n        setData(items);\n        dataRef.current = items;\n        if (date !== _topSection.current) {\n            setTimeout(() => {\n                scrollToSection(date);\n            }, 500);\n        }\n    }, [sections]);\n    useDidUpdate(() => {\n        // NOTE: on first init data should set first section to the current date!!!\n        if (updateSource !== UpdateSources.LIST_DRAG && updateSource !== UpdateSources.CALENDAR_INIT) {\n            scrollToSection(date);\n        }\n    }, [date]);\n    const getSectionIndex = (date) => {\n        let dataIndex = 0;\n        for (let i = 0; i < sections.length; i++) {\n            if (sections[i].title === date) {\n                return dataIndex;\n            }\n            dataIndex += sections[i].data.length + 1;\n        }\n    };\n    const getNextSectionIndex = (date) => {\n        const cur = new XDate(date);\n        let dataIndex = 0;\n        for (let i = 0; i < sections.length; i++) {\n            const titleDate = parseDate(sections[i].title);\n            if (isGTE(titleDate, cur)) {\n                return dataIndex;\n            }\n            dataIndex += sections[i].data.length + 1;\n        }\n    };\n    const getSectionTitle = useCallback((title) => {\n        if (!title)\n            return;\n        let sectionTitle = title;\n        if (dayFormatter) {\n            sectionTitle = dayFormatter(title);\n        }\n        else if (dayFormat) {\n            if (useMoment) {\n                const moment = getMoment();\n                sectionTitle = moment(title).format(dayFormat);\n            }\n            else {\n                sectionTitle = new XDate(title).toString(dayFormat);\n            }\n        }\n        if (markToday) {\n            const string = getDefaultLocale().today || todayString;\n            const today = isToday(title);\n            sectionTitle = today ? `${string}, ${sectionTitle}` : sectionTitle;\n        }\n        return sectionTitle;\n    }, []);\n    const scrollToSection = useCallback(debounce((requestedDate) => {\n        const sectionIndex = scrollToNextEvent ? getNextSectionIndex(requestedDate) : getSectionIndex(requestedDate);\n        if (isUndefined(sectionIndex)) {\n            return;\n        }\n        if (list?.current && sectionIndex !== undefined) {\n            sectionScroll.current = true; // to avoid setDate() in _onVisibleIndicesChanged\n            if (requestedDate !== _topSection.current) {\n                _topSection.current = sections[findItemTitleIndex(sectionIndex)]?.title;\n                list.current?.scrollToIndex(sectionIndex, true);\n            }\n            setTimeout(() => {\n                _onMomentumScrollEnd(); // the RecyclerListView doesn't trigger onMomentumScrollEnd when calling scrollToSection\n            }, 500);\n        }\n    }, 1000, { leading: true, trailing: true }), [sections]);\n    const layoutProvider = useMemo(() => new LayoutProvider((index) => dataRef.current[index]?.isTitle ? 'title' : dataRef.current[index]?.itemCustomHeightType ?? 'page', (type, dim) => {\n        dim.width = constants.screenWidth;\n        switch (type) {\n            case 'title':\n                dim.height = infiniteListProps?.titleHeight ?? 60;\n                break;\n            case 'page':\n                dim.height = infiniteListProps?.itemHeight ?? 80;\n                break;\n            default:\n                dim.height = infiniteListProps?.itemHeightByType?.[type] ?? infiniteListProps?.itemHeight ?? 80;\n        }\n    }), []);\n    const _onScroll = useCallback((rawEvent) => {\n        if (!didScroll.current) {\n            didScroll.current = true;\n            scrollToSection.cancel();\n        }\n        // Convert to a format similar to NativeSyntheticEvent<NativeScrollEvent>\n        const event = {\n            nativeEvent: {\n                contentOffset: rawEvent.nativeEvent.contentOffset,\n                layoutMeasurement: rawEvent.nativeEvent.layoutMeasurement,\n                contentSize: rawEvent.nativeEvent.contentSize\n            }\n        };\n        onScroll?.(event);\n    }, [onScroll]);\n    const _onVisibleIndicesChanged = useCallback((all) => {\n        if (all && all.length && !sectionScroll.current) {\n            const topItemIndex = all[0];\n            const topSection = data[findItemTitleIndex(topItemIndex)];\n            if (topSection && topSection !== _topSection.current) {\n                _topSection.current = topSection.title;\n                if (didScroll.current && !avoidDateUpdates) {\n                    // to avoid setDate() on first load (while setting the initial context.date value)\n                    setDate?.(topSection.title, UpdateSources.LIST_DRAG);\n                }\n            }\n        }\n    }, [avoidDateUpdates, setDate, data]);\n    const findItemTitleIndex = useCallback((itemIndex) => {\n        let titleIndex = itemIndex;\n        while (titleIndex > 0 && !data[titleIndex]?.isTitle) {\n            titleIndex--;\n        }\n        return titleIndex;\n    }, [data]);\n    const _onMomentumScrollEnd = useCallback(() => {\n        sectionScroll.current = false;\n    }, []);\n    const headerTextStyle = useMemo(() => [style.current.sectionText, sectionStyle], [sectionStyle]);\n    const _renderSectionHeader = useCallback((info) => {\n        const title = info?.section?.title;\n        if (renderSectionHeader) {\n            return renderSectionHeader(title);\n        }\n        const headerTitle = getSectionTitle(title);\n        return <AgendaSectionHeader title={headerTitle} style={headerTextStyle}/>;\n    }, [headerTextStyle]);\n    const _renderItem = useCallback((_type, item) => {\n        if (item?.isTitle) {\n            return _renderSectionHeader({ section: item });\n        }\n        if (renderItem) {\n            return renderItem({ item });\n        }\n        return <></>;\n    }, [renderItem]);\n    const _onEndReached = useCallback(() => {\n        if (onEndReached) {\n            onEndReached({ distanceFromEnd: 0 }); // The RecyclerListView doesn't provide the distanceFromEnd, so we just pass 0\n        }\n    }, [onEndReached]);\n    return (<InfiniteList ref={list} renderItem={_renderItem} data={data} style={style.current.container} layoutProvider={layoutProvider} onScroll={_onScroll} onVisibleIndicesChanged={_onVisibleIndicesChanged} scrollViewProps={{ nestedScrollEnabled: true, ...others, onMomentumScrollEnd: _onMomentumScrollEnd }} onEndReached={_onEndReached} onEndReachedThreshold={onEndReachedThreshold} disableScrollOnDataChange renderFooter={infiniteListProps?.renderFooter}/>);\n};\nexport default InfiniteAgendaList;\nInfiniteAgendaList.displayName = 'InfiniteAgendaList';\nInfiniteAgendaList.propTypes = {\n    dayFormat: PropTypes.string,\n    dayFormatter: PropTypes.func,\n    useMoment: PropTypes.bool,\n    markToday: PropTypes.bool,\n    sectionStyle: PropTypes.oneOfType([PropTypes.object, PropTypes.number, PropTypes.array]),\n    avoidDateUpdates: PropTypes.bool\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}