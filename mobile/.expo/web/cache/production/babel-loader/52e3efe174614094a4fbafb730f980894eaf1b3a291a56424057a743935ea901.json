{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useState,useContext,useEffect}from'react';import View from\"react-native-web/dist/exports/View\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import Switch from\"react-native-web/dist/exports/Switch\";import{Text,useTheme}from'react-native-paper';import{AuthContext}from'../context/AuthContext';import AsyncStorage from'@react-native-async-storage/async-storage';import Ionicons from'react-native-vector-icons/Ionicons';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";var ThemeToggle=function ThemeToggle(_ref){var onToggle=_ref.onToggle,isDarkMode=_ref.isDarkMode;var theme=useTheme();return _jsxs(View,{style:styles.themeToggleContainer,children:[_jsx(Ionicons,{name:\"sunny-outline\",size:20,color:theme.colors.text}),_jsx(Switch,{value:isDarkMode,onValueChange:onToggle,trackColor:{false:'#767577',true:theme.colors.primary},thumbColor:isDarkMode?theme.colors.accent:'#f4f3f4',style:styles.switch}),_jsx(Ionicons,{name:\"moon-outline\",size:20,color:theme.colors.text})]});};var DisplaySettings=function DisplaySettings(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isDarkMode=_useState2[0],setIsDarkMode=_useState2[1];var _useContext=useContext(AuthContext),updateUserPreferences=_useContext.updateUserPreferences,userInfo=_useContext.userInfo;var theme=useTheme();useEffect(function(){var loadThemePreference=function(){var _ref2=_asyncToGenerator(function*(){try{var themePreference=yield AsyncStorage.getItem('themePreference');if(themePreference!==null){setIsDarkMode(themePreference==='dark');}}catch(error){console.error('Erreur lors du chargement des préférences de thème:',error);}});return function loadThemePreference(){return _ref2.apply(this,arguments);};}();loadThemePreference();},[]);var handleThemeToggle=function(){var _ref3=_asyncToGenerator(function*(value){setIsDarkMode(value);try{yield AsyncStorage.setItem('themePreference',value?'dark':'light');if(userInfo&&updateUserPreferences){updateUserPreferences({theme:value?'dark':'light'});}}catch(error){console.error('Erreur lors de la sauvegarde des préférences de thème:',error);}});return function handleThemeToggle(_x){return _ref3.apply(this,arguments);};}();return _jsxs(View,{style:[styles.container,{backgroundColor:theme.colors.background}],children:[_jsx(Text,{style:[styles.title,{color:theme.colors.text}],children:\"Param\\xE8tres d'affichage\"}),_jsxs(View,{style:styles.settingItem,children:[_jsx(Text,{style:[styles.settingLabel,{color:theme.colors.text}],children:\"Mode sombre\"}),_jsx(ThemeToggle,{onToggle:handleThemeToggle,isDarkMode:isDarkMode})]}),_jsx(TouchableOpacity,{style:[styles.button,{backgroundColor:theme.colors.primary}],children:_jsx(Text,{style:styles.buttonText,children:\"Appliquer\"})})]});};var styles=StyleSheet.create({container:{flex:1,padding:20},title:{fontSize:24,fontWeight:'bold',marginBottom:20},settingItem:{flexDirection:'row',justifyContent:'space-between',alignItems:'center',paddingVertical:15,borderBottomWidth:1,borderBottomColor:'#e0e0e0'},settingLabel:{fontSize:16},themeToggleContainer:{flexDirection:'row',alignItems:'center'},switch:{marginHorizontal:10},button:{marginTop:30,padding:15,borderRadius:8,alignItems:'center'},buttonText:{color:'white',fontWeight:'bold',fontSize:16}});export default DisplaySettings;","map":{"version":3,"names":["React","useState","useContext","useEffect","View","StyleSheet","TouchableOpacity","Switch","Text","useTheme","AuthContext","AsyncStorage","Ionicons","jsx","_jsx","jsxs","_jsxs","ThemeToggle","_ref","onToggle","isDarkMode","theme","style","styles","themeToggleContainer","children","name","size","color","colors","text","value","onValueChange","trackColor","false","true","primary","thumbColor","accent","switch","DisplaySettings","_useState","_useState2","_slicedToArray","setIsDarkMode","_useContext","updateUserPreferences","userInfo","loadThemePreference","_ref2","_asyncToGenerator","themePreference","getItem","error","console","apply","arguments","handleThemeToggle","_ref3","setItem","_x","container","backgroundColor","background","title","settingItem","settingLabel","button","buttonText","create","flex","padding","fontSize","fontWeight","marginBottom","flexDirection","justifyContent","alignItems","paddingVertical","borderBottomWidth","borderBottomColor","marginHorizontal","marginTop","borderRadius"],"sources":["C:/Users/User/Downloads/git_frontend/mobile/components/DisplaySettings.js"],"sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\nimport { View, StyleSheet, TouchableOpacity, Switch } from 'react-native';\nimport { Text, useTheme } from 'react-native-paper';\nimport { AuthContext } from '../context/AuthContext';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport Ionicons from 'react-native-vector-icons/Ionicons';\n\n// Composant pour le sélecteur de thème (clair/sombre)\nconst ThemeToggle = ({ onToggle, isDarkMode }) => {\n  const theme = useTheme();\n  \n  return (\n    <View style={styles.themeToggleContainer}>\n      <Ionicons name=\"sunny-outline\" size={20} color={theme.colors.text} />\n      <Switch\n        value={isDarkMode}\n        onValueChange={onToggle}\n        trackColor={{ false: '#767577', true: theme.colors.primary }}\n        thumbColor={isDarkMode ? theme.colors.accent : '#f4f3f4'}\n        style={styles.switch}\n      />\n      <Ionicons name=\"moon-outline\" size={20} color={theme.colors.text} />\n    </View>\n  );\n};\n\n// Composant principal pour les paramètres d'affichage\nconst DisplaySettings = () => {\n  const [isDarkMode, setIsDarkMode] = useState(false);\n  const { updateUserPreferences, userInfo } = useContext(AuthContext);\n  const theme = useTheme();\n\n  // Charger les préférences utilisateur au chargement\n  useEffect(() => {\n    const loadThemePreference = async () => {\n      try {\n        const themePreference = await AsyncStorage.getItem('themePreference');\n        if (themePreference !== null) {\n          setIsDarkMode(themePreference === 'dark');\n        }\n      } catch (error) {\n        console.error('Erreur lors du chargement des préférences de thème:', error);\n      }\n    };\n\n    loadThemePreference();\n  }, []);\n\n  // Gérer le changement de thème\n  const handleThemeToggle = async (value) => {\n    setIsDarkMode(value);\n    \n    try {\n      // Sauvegarder la préférence localement\n      await AsyncStorage.setItem('themePreference', value ? 'dark' : 'light');\n      \n      // Si l'utilisateur est connecté, mettre à jour ses préférences sur le serveur\n      if (userInfo && updateUserPreferences) {\n        updateUserPreferences({ theme: value ? 'dark' : 'light' });\n      }\n    } catch (error) {\n      console.error('Erreur lors de la sauvegarde des préférences de thème:', error);\n    }\n  };\n\n  return (\n    <View style={[styles.container, { backgroundColor: theme.colors.background }]}>\n      <Text style={[styles.title, { color: theme.colors.text }]}>Paramètres d'affichage</Text>\n      \n      <View style={styles.settingItem}>\n        <Text style={[styles.settingLabel, { color: theme.colors.text }]}>Mode sombre</Text>\n        <ThemeToggle onToggle={handleThemeToggle} isDarkMode={isDarkMode} />\n      </View>\n      \n      <TouchableOpacity style={[styles.button, { backgroundColor: theme.colors.primary }]}>\n        <Text style={styles.buttonText}>Appliquer</Text>\n      </TouchableOpacity>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 20,\n  },\n  title: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    marginBottom: 20,\n  },\n  settingItem: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingVertical: 15,\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n  },\n  settingLabel: {\n    fontSize: 16,\n  },\n  themeToggleContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  switch: {\n    marginHorizontal: 10,\n  },\n  button: {\n    marginTop: 30,\n    padding: 15,\n    borderRadius: 8,\n    alignItems: 'center',\n  },\n  buttonText: {\n    color: 'white',\n    fontWeight: 'bold',\n    fontSize: 16,\n  },\n});\n\nexport default DisplaySettings;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}